<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" type="text/css" href="../../stylesheets/stylesheet.css" media="screen">
  <link rel="stylesheet" type="text/css" href="../../stylesheets/pygment_trac.css" media="screen">
  <link rel="stylesheet" type="text/css" href="../../stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>一个故事理解SUN JVM GC原理</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header> 
         <h1><a style="color:#000" href="http://smartmz.github.io/" target="_blank">SmartMZ的Block</a></h1> 
         <h2>积累</h2> 
       </header> 
       <hr>
       <section id="main_content">
        <h3>【JAVA】一个故事理解SUN JVM GC原理</h3>

        <p>一个故事理解SUN JVM GC原理</p>
        <hr>
        <h4>一个故事</h4>
        <ul>
         <li>人们一出生（new），首先生活在伊甸园（Eden Space），他们过着无忧无虑的生活。</li>
         <li>地主（GC）的到来打破了他们平静的生活。地主经常挨个排查他们的生活状况，有没有给我干活啊（是否有对象的引用）？干活的人们去幸存区（Survivor Space），不干活的统统淘汰掉（释放资源，GC掉）。</li>
         <li>幸存区实际上有两块，总有一块是空闲的；地主每次排查后，把伊甸园幸存的人们和另一个幸存区的人们统统赶到空闲的幸存区。在幸存区的人们也不能高枕无忧，地主还会定期（可以自定义）排查他们干活的状况，体力充沛（有对象引用）的人们被送进养老区（Tenured Generation），耗完体力的人们统统淘汰掉。这两个排查就把不干活的和不能长时间干活的人们统统淘汰掉了（minor collection）。</li>
         <li>在养老区的人们基本就可以安心干活了，不过养老区如果满了，地主也还是会把他们淘汰掉（major collection），重新整理一下其他养老的人们，但是地主比较懒，排查的频率很低。</li>
       </ul>
       <h4>为什么要分这么多区？</h4>
       <ul>
         <li>刚出生的人们生活在伊甸园都要做标记，其中体力很快消耗没了的人们就立即被淘汰（mark-sweep）。像这样生命周期很短的人们大概占80%-98%，如果大量这样的人们被淘汰了，地主要重新整理剩下的少数人们（压缩）。地主觉得这样很耗费时间和精力，真是太懒了。于是就有了幸存区，地主直接让这些人们去幸存区呆着（copy）。这样还有个好处，地主下次在排查刚出生的人们时就不需要排查这部分人了（避免遍历）。</li>
         <li>幸存区分为两个，总有一块是空闲的，这也是地主不想耗费太多时间和精力想出来的。把人赶到另一个区总比重新整理省脑子。</li>
         <li>体力比较充沛的能长时间干活的人们被放在养老区，地主就不用经常排查这些人了。即使偶尔有人被淘汰，重新整理一下，也不算耗费时间精力</li>
       </ul>
     </section>
     <footer>
      This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
    </footer>        
  </div>
</div>
</body>
</html>
